use alienfile;

# idiomatic way to make sure we always install?
probe [ 'exit 127' ];
 
share {
  start_url 'https://install.python-poetry.org';
  plugin 'Download';
  plugin 'Extract::File';

  build [
    [ # https://github.com/python-poetry/install.python-poetry.org/issues/24
      # https://github.com/python-poetry/install.python-poetry.org/issues/52
      q{ sed -i -e 's/symlinks=False/symlinks=True/' %{alien.install.extract}/install-poetry.py } ],

    [ q{ POETRY_HOME=%{alien.install.prefix} python3 %{alien.install.extract}/install-poetry.py } ],
  ];
};

# vim: set ft=perl:
